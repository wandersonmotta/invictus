@tailwind components;

@layer components {
  /*
    Invictus Sidebar Skin
    - Sem bloco de marca
    - Denso/Marcante
    - Ativo: barra dourada + capsule glass + highlight metálico
  */

  /* Container (alvo real é o [data-sidebar="sidebar"] interno)
     Assinatura: vinheta + marca d’água (monograma) + “champagne edge” (sem textura). */
  .invictus-sidebar [data-sidebar="sidebar"] {
    position: relative;
    background:
      radial-gradient(120% 80% at 18% 0%, hsl(var(--gold-soft) / 0.06), transparent 58%),
      radial-gradient(110% 80% at 110% 14%, hsl(var(--gold-hot) / 0.04), transparent 62%),
      linear-gradient(180deg, hsl(var(--card) / var(--glass)) 0%, hsl(var(--card) / 0.18) 100%);
    backdrop-filter: blur(18px);
    box-shadow:
      0 0 0 1px hsl(var(--border) / 0.60) inset,
      0 0 0 1px hsl(var(--gold-hot) / 0.08) inset,
      0 24px 80px -60px hsl(var(--foreground) / 0.55);
  }

  .invictus-sidebar [data-sidebar="sidebar"]::before {
    content: "";
    position: absolute;
    inset: 0;
    pointer-events: none;
    border-radius: inherit;
    background:
      /* champagne edge */
      linear-gradient(
        135deg,
        hsl(var(--gold-soft) / 0.06),
        hsl(var(--gold-hot) / 0.12) 40%,
        transparent 70%
      ),
      /* controlled specular */
      linear-gradient(180deg, hsl(var(--foreground) / 0.10), transparent 34%);
    opacity: 0.95;
  }

  /* Command Deck: spine/trilho contínuo (a identidade) */
  .invictus-sidebar [data-sidebar="sidebar"]::after {
    content: "";
    position: absolute;
    left: 14px;
    top: 12px;
    bottom: 12px;
    width: 2px;
    pointer-events: none;
    border-radius: 999px;
    background: linear-gradient(
      180deg,
      hsl(var(--gold-soft) / 0.10),
      hsl(var(--foreground) / 0.08) 35%,
      hsl(var(--foreground) / 0.06) 70%,
      hsl(var(--gold-hot) / 0.10)
    );
    box-shadow:
      0 0 0 1px hsl(var(--border) / 0.50) inset,
      0 12px 42px -34px hsl(var(--foreground) / 0.55);
    opacity: 0.85;
  }

  /* Menu item (aplicado em SidebarMenuButton)
     Motif: “Crest discreto” (placa limpa + friso interno), sem recortes. */
  .invictus-sidebar-item {
    position: relative;
    overflow: hidden;
    isolation: isolate;
    border-radius: 0.9rem;
    background: transparent;
    transition:
      transform 160ms ease,
      box-shadow 180ms ease,
      background-color 180ms ease,
      filter 180ms ease;
  }

  /* Command Deck: sem “placa”/capsule — só friso de precisão */
  .invictus-sidebar-item::before {
    content: "";
    position: absolute;
    inset: 0;
    pointer-events: none;
    background:
      linear-gradient(180deg, hsl(var(--foreground) / 0.10), transparent 46%);
    opacity: 0.10;
    z-index: 0;
    transition: opacity 180ms ease;
  }

  /* Hover discreto (sem lift, sem template) */
  .invictus-sidebar-item:hover {
    transform: none;
    box-shadow: none;
  }

  .invictus-sidebar-item:hover::before {
    opacity: 0.18;
  }

  /* Active: acontece no trilho (notch), não no fundo do item */
  .invictus-sidebar-item[data-active="true"] {
    background: transparent;
    box-shadow: none;
  }

  /* Notch dourado no trilho (identidade) */
  .invictus-sidebar-item[data-active="true"]::after {
    content: "";
    position: absolute;
    left: 10px; /* aligns with spine at 14px */
    top: 50%;
    width: 10px;
    height: 18px;
    transform: translateY(-50%);
    border-radius: 999px;
    background: linear-gradient(
      180deg,
      hsl(var(--gold-soft) / 0.92),
      hsl(var(--gold-hot) / 0.98)
    );
    box-shadow:
      0 0 0 1px hsl(var(--gold-hot) / 0.32),
      0 10px 28px -22px hsl(var(--gold-hot) / 0.55);
    opacity: 1;
    z-index: 0;
  }

  /* Link interno (tipografia/alinhamento) */
  .invictus-sidebar-link {
    display: flex;
    align-items: center;
    gap: 0.65rem;
    width: 100%;
    border-radius: inherit;
    /* reserve space for spine */
    padding-left: 1.55rem;
    padding-right: 0.65rem;
    padding-block: 0.6rem;
    color: hsl(var(--sidebar-foreground));
    text-decoration: none;
  }

  /* Mantém pseudo-elements no fundo e conteúdo acima */
  .invictus-sidebar-item > * {
    position: relative;
    z-index: 1;
  }

  /* Wrapper dedicado para permitir “icon plate” no ativo */
  .invictus-sidebar-iconWrap {
    position: relative;
    display: grid;
    place-items: center;
    width: 1.9rem;
    height: 1.9rem;
    flex: 0 0 auto;
    border-radius: 0.85rem;
  }

  .invictus-sidebar-icon {
    width: 1.1rem;
    height: 1.1rem;
    color: hsl(var(--sidebar-foreground) / 0.82);
  }

  .invictus-sidebar-label {
    letter-spacing: 0.015em;
    font-weight: 620;
    color: hsl(var(--sidebar-foreground) / 0.92);
    text-transform: none;
    font-size: 0.9rem;
    line-height: 1.05;
  }

  /* Active text polish */
  .invictus-sidebar-item[data-active="true"] .invictus-sidebar-label {
    color: hsl(var(--gold-soft) / 0.92);
    text-shadow: 0 0 14px hsl(var(--gold-hot) / 0.14);
  }

  /* Icon plate metálico (SÓ no ativo) */
  /* (Crest discreto) sem medalhão: ícone só ganha contraste no ativo */
  .invictus-sidebar-item[data-active="true"] .invictus-sidebar-icon {
    position: relative;
    z-index: 1;
    color: hsl(var(--gold-soft) / 0.92);
    filter:
      drop-shadow(0 0 10px hsl(var(--gold-hot) / 0.12))
      drop-shadow(0 10px 22px hsl(var(--foreground) / 0.16));
  }

  /* Hover/Focus: comportamento “deck” (contraste, não efeito) */
  .invictus-sidebar-item:hover .invictus-sidebar-label {
    color: hsl(var(--sidebar-foreground));
  }

  .invictus-sidebar-item:hover .invictus-sidebar-icon {
    color: hsl(var(--sidebar-foreground) / 0.92);
  }

  /* Tooltip com skin (para estado colapsado ficar “Invictus”) */
  .invictus-tooltip {
    border-radius: 0.85rem;
    background:
      linear-gradient(180deg, hsl(var(--background) / 0.26), hsl(var(--background) / 0.14));
    backdrop-filter: blur(18px);
    color: hsl(var(--foreground));
    border: 1px solid hsl(var(--gold-hot) / 0.32);
    box-shadow:
      0 1px 0 0 hsl(var(--foreground) / 0.10) inset,
      0 18px 70px -44px hsl(var(--foreground) / 0.55);
  }

  /* Mini (collapsed): manter mesma assinatura sem “sumir” */
  .group[data-collapsible="icon"] .invictus-sidebar-item {
    border-radius: 0.9rem;
  }
}
