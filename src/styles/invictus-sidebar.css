@tailwind components;

@layer components {
  /*
    Invictus Sidebar Skin
    - Sem bloco de marca
    - Denso/Marcante
    - Ativo: barra dourada + capsule glass + highlight metálico
  */

  /* Container (alvo real é o [data-sidebar="sidebar"] interno)
     Assinatura: vinheta + marca d’água (monograma) + “champagne edge” (sem textura). */
  .invictus-sidebar [data-sidebar="sidebar"] {
    position: relative;
    /* Tuning knobs (light defaults; dark overrides below) */
    --sidebar-marble-opacity: 0.14;
    --sidebar-top-highlight-opacity: 0.78;
    --sidebar-marble-blend: soft-light;
    /* Clean glass (sem "glaze" dourado) */
    background: linear-gradient(180deg, hsl(var(--card) / var(--glass)) 0%, hsl(var(--card) / 0.16) 100%);
    backdrop-filter: blur(18px);
    box-shadow:
      0 0 0 1px hsl(var(--border) / 0.60) inset,
      /* champagne edge (bem sutil, sem "banho" dourado) */
      0 0 0 1px hsl(var(--gold-hot) / 0.03) inset,
      0 24px 80px -60px hsl(var(--foreground) / 0.55);
  }

  /* Dark: um pouco mais presente sem virar “glaze” */
  .dark .invictus-sidebar [data-sidebar="sidebar"] {
    --sidebar-marble-opacity: 0.26;
    --sidebar-top-highlight-opacity: 0.90;
  }

  .invictus-sidebar [data-sidebar="sidebar"]::before {
    content: "";
    position: absolute;
    inset: 0;
    pointer-events: none;
    border-radius: inherit;
    background:
      /* top highlight (luz no vidro) */
      radial-gradient(110% 55% at 50% 0%, hsl(var(--gold-soft) / 0.08), transparent 60%),
      /* champagne edge (apenas na borda, quase imperceptível) */
      linear-gradient(135deg, hsl(var(--gold-hot) / 0.05), transparent 60%),
      /* controlled specular */
      linear-gradient(180deg, hsl(var(--foreground) / 0.08), transparent 36%);
    opacity: var(--sidebar-top-highlight-opacity);
  }

  /* Remove “spine” do Command Deck (padrão do print é lista limpa) */
  .invictus-sidebar [data-sidebar="sidebar"]::after {
    content: "";
    position: absolute;
    inset: 0;
    pointer-events: none;
    border-radius: inherit;
    /* “mármore sob o vidro”: dourado + grafite, bem sutil */
    background:
      radial-gradient(120% 90% at 14% 10%, hsl(var(--gold-hot) / 0.10), transparent 56%),
      radial-gradient(120% 90% at 92% 18%, hsl(var(--gold-soft) / 0.08), transparent 60%),
      /* veios grafite (bem suaves) */
      radial-gradient(130% 110% at 42% 86%, hsl(var(--foreground) / 0.08), transparent 66%),
      radial-gradient(140% 120% at 78% 72%, hsl(var(--foreground) / 0.05), transparent 64%),
      /* direção/fluxo (polido) */
      linear-gradient(135deg, transparent 0%, hsl(var(--gold-hot) / 0.05) 36%, transparent 72%);
    mix-blend-mode: var(--sidebar-marble-blend);
    opacity: var(--sidebar-marble-opacity);
    filter: blur(0.2px);
  }

  /* Seções (como no print) */
  .invictus-sidebar-section {
    padding-top: 0.25rem;
  }

  .invictus-sidebar-section + .invictus-sidebar-section {
    margin-top: 0.75rem;
  }

  .invictus-sidebar-sectionLabel {
    height: auto;
    padding: 0.25rem 0.75rem;
    font-size: 0.9rem;
    font-weight: 650;
    letter-spacing: 0.01em;
    color: hsl(var(--sidebar-foreground) / 0.78);
    opacity: 1 !important;
    margin: 0;
  }

  .invictus-sidebar-menu {
    gap: 0.25rem;
  }

  /* Menu item (aplicado em SidebarMenuButton)
     Motif: “Crest discreto” (placa limpa + friso interno), sem recortes. */
  .invictus-sidebar-item {
    position: relative;
    overflow: hidden;
    isolation: isolate;
    border-radius: 0.9rem;
    background: transparent;
    transition:
      transform 160ms ease,
      box-shadow 180ms ease,
      background-color 180ms ease,
      filter 180ms ease;
  }

  /* Command Deck: sem “placa”/capsule — só friso de precisão */
  .invictus-sidebar-item::before {
    content: "";
    position: absolute;
    inset: 0;
    pointer-events: none;
    background:
      linear-gradient(180deg, hsl(var(--foreground) / 0.10), transparent 46%);
    opacity: 0.10;
    z-index: 0;
    transition: opacity 180ms ease;
  }

  /* Hover discreto (sem lift, sem template) */
  .invictus-sidebar-item:hover {
    transform: none;
    box-shadow: none;
  }

  .invictus-sidebar-item:hover::before {
    opacity: 0.18;
  }

  /* Active: acontece no trilho (notch), não no fundo do item */
  .invictus-sidebar-item[data-active="true"] {
    background: transparent;
    box-shadow: none;
  }

  /* Active discreto (como lista do print): barra fina + leve fundo */
  .invictus-sidebar-item[data-active="true"]::after {
    content: "";
    position: absolute;
    left: 0.65rem;
    top: 22%;
    bottom: 22%;
    width: 2px;
    border-radius: 999px;
    background: linear-gradient(180deg, hsl(var(--gold-soft) / 0.55), hsl(var(--gold-hot) / 0.55));
    opacity: 0.7;
    z-index: 0;
  }

  .invictus-sidebar-item[data-active="true"] {
    background: hsl(var(--foreground) / 0.03);
  }

  /* Link interno (tipografia/alinhamento) */
  .invictus-sidebar-link {
    display: flex;
    align-items: center;
    gap: 0.65rem;
    width: 100%;
    border-radius: inherit;
    /* roomy like the reference */
    padding-left: 1.35rem;
    padding-right: 0.85rem;
    padding-block: 0.85rem;
    color: hsl(var(--sidebar-foreground));
    text-decoration: none;
  }

  /* Mantém pseudo-elements no fundo e conteúdo acima */
  .invictus-sidebar-item > * {
    position: relative;
    z-index: 1;
  }

  /* Wrapper dedicado para permitir “icon plate” no ativo */
  .invictus-sidebar-iconWrap {
    position: relative;
    display: grid;
    place-items: center;
    width: 2rem;
    height: 2rem;
    flex: 0 0 auto;
    border-radius: 0.85rem;
  }

  .invictus-sidebar-icon {
    width: 1.1rem;
    height: 1.1rem;
    color: hsl(var(--sidebar-foreground) / 0.60);
  }

  .invictus-sidebar-label {
    letter-spacing: 0.015em;
    font-weight: 560;
    color: hsl(var(--sidebar-foreground) / 0.72);
    text-transform: none;
    font-size: 0.95rem;
    line-height: 1.1;
  }

  /* Active text polish */
  .invictus-sidebar-item[data-active="true"] .invictus-sidebar-label {
    color: hsl(var(--sidebar-foreground) / 0.92);
    text-shadow: none;
  }

  /* Icon plate metálico (SÓ no ativo) */
  /* (Crest discreto) sem medalhão: ícone só ganha contraste no ativo */
  .invictus-sidebar-item[data-active="true"] .invictus-sidebar-icon {
    position: relative;
    z-index: 1;
    color: hsl(var(--sidebar-foreground) / 0.86);
    filter: none;
  }

  /* Hover/Focus: comportamento “deck” (contraste, não efeito) */
  .invictus-sidebar-item:hover .invictus-sidebar-label {
    color: hsl(var(--sidebar-foreground) / 0.88);
  }

  .invictus-sidebar-item:hover .invictus-sidebar-icon {
    color: hsl(var(--sidebar-foreground) / 0.78);
  }

  /* Tooltip com skin (para estado colapsado ficar “Invictus”) */
  .invictus-tooltip {
    border-radius: 0.85rem;
    background:
      linear-gradient(180deg, hsl(var(--background) / 0.26), hsl(var(--background) / 0.14));
    backdrop-filter: blur(18px);
    color: hsl(var(--foreground));
    border: 1px solid hsl(var(--gold-hot) / 0.32);
    box-shadow:
      0 1px 0 0 hsl(var(--foreground) / 0.10) inset,
      0 18px 70px -44px hsl(var(--foreground) / 0.55);
  }

  /* Mini (collapsed): manter mesma assinatura sem “sumir” */
  .group[data-collapsible="icon"] .invictus-sidebar-item {
    border-radius: 0.9rem;
  }
}
